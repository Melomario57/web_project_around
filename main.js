!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formSelector=t.formSelector,this.inputSelector=t.inputSelector,this.submitButtonSelector=t.submitButtonSelector,this.inactiveButtonClass=t.inactiveButtonClass,this.inputErrorClass=t.inputErrorClass,this.errorClass=t.errorClass,this._formElement=document.querySelector(n),this._submitButton=this._formElement.querySelector(t.submitButtonSelector)},(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".form__error_".concat(e.name));e.classList.add(this.inputErrorClass),n.textContent=t,n.classList.add(this.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".form__error_".concat(e.name));e.classList.remove(this.inputErrorClass),t.classList.remove(this.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._submitButton.classList.add(this.inactiveButtonClass):this._submitButton.classList.remove(this.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this.inputList=Array.from(this._formElement.querySelectorAll(this.inputSelector)),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t,n,r,o){var i=o.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._link=n,this._template=r,this._handleCardClick=i},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".cards__item").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".cards__image").src=this._link,this._element.querySelector(".cards__image-text").textContent=this._name,this._element.querySelector(".cards__image").alt="imagen de ".concat(this._name," "),this._element}},{key:"_handlerLike",value:function(){this._element.querySelector(".cards__hearth-button").classList.toggle("cards__hearth-button_active")}},{key:"_handlerRemove",value:function(){this._removeCard=this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".cards__image").addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this._element.querySelector(".cards__hearth-button").addEventListener("click",(function(){e._handlerLike()})),this._element.querySelector(".cards__trash-button").addEventListener("click",(function(){e._handlerRemove()}))}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var p=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=r,this._renderer=o,this.container=document.querySelector(n)},(t=[{key:"renderer",value:function(){var e=this;this.items.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this.container.append(e)}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var b=function(){return e=function e(t){var n=t.usernameSelector,r=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._username=document.querySelector(n),this._job=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{username:this._username.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.job;this._username.textContent=t,this._job.textContent=n}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var h=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.getElementById(t),this._handleEscCloseAux=this._handleEscClose.bind(this),this.setEventListeners()},(t=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscCloseAux)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.addEventListener("keydown",this._handleEscCloseAux)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__button-cross").addEventListener("click",(function(){e.close()})),this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}function E(e,t,n){return t=P(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,n||[],P(e).constructor):t.apply(e,n))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function j(e,t,n,r){var o=C(P(1&r?e.prototype:e),t,n);return 2&r?function(e){return o.apply(n,e)}:o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(null,arguments)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var L=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=E(this,t,[e]))._submitCallback=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,(r=[{key:"_getInputValues",value:function(){var e={},t=this._popupElement.querySelector("form");return Array.from(t.querySelectorAll("input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;j(t,"setEventListeners",this,3)([]),this._popupElement.querySelector("form").addEventListener("submit",(function(t){t.preventDefault(),e._submitCallback(e._getInputValues()),e.close()}))}},{key:"close",value:function(){var e=this._popupElement.querySelector("form");j(t,"close",this,3)([]),e.reset()}}])&&g(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}function T(e,t,n){return t=V(t),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},R.apply(null,arguments)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var z=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=T(this,t,[e]))._popupImage=n._popupElement.querySelector(".popup__image-big"),n._popupTitle=n._popupElement.querySelector(".popup__image-title"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,r=[{key:"open",value:function(e,n){var r,o,i;this._popupImage.src=n,this._popupImage.alt="imagen de ".concat(this._name," "),this._popupTitle.textContent=e,(r=t,o=this,i=R(V(1&3?r.prototype:r),"open",o),function(e){return i.apply(o,e)})([])}}],r&&B(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(h),W=(document.getElementById("editProfile"),document.querySelector(".profile__edit-button")),D=(document.querySelector(".popup__button-cross"),document.querySelector(".popup__form"),document.querySelector(".profile__title")),U=document.querySelector(".profile__subtitle"),F=document.querySelector("#name"),M=document.querySelector("#about"),N=(document.getElementById("popupImage"),document.querySelector(".profile__add-button")),Y=(document.getElementById("addCross"),document.querySelector(".template"),document.querySelector(".cards__content")),G=(document.getElementById("title"),document.getElementById("link"),document.getElementById("imageForm"),document.getElementById("popupCard"),document.querySelector(".popup__image-title"),document.querySelector(".popup__image-big"),document.getElementById("imageCross"),{formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",inputErrorClass:"popup__form-input_invalid",errorClass:"form__error-active"}),H=new z("popupCard"),J=new L("popupImage",(function(e){var t=new a(e.title,e.link,".template",{handleCardClick:function(){H.open(e.title,e.link)}});Y.prepend(t.generateCard())})),K=new b({usernameSelector:".profile__title",jobSelector:".profile__subtitle"}),Q=new L("editProfile",(function(e){D.textContent=e.name,U.textContent=e.about,Q.close()}));W.addEventListener("click",(function(){Q.open();var e=K.getUserInfo();F.value=e.username,M.value=e.job})),N.addEventListener("click",(function(){J.open()})),new r(G,".popup__form").enableValidation(),new r(G,"#imageForm").enableValidation();var X=new p({items:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(e){var t=new a(e.name,e.link,".template",{handleCardClick:function(){H.open(e.name,e.link)}});X.addItem(t.generateCard())}},".cards__content");X.renderer()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FFUixDQUNFdkIsS0FBTSxrQkFDTnVCLEtBQU0sdUdBRVIsQ0FDRXZCLEtBQU0sVUFDTnVCLEtBQU0sZ0dBRVIsQ0FDRXZCLEtBQU0sZ0NBQ051QixLQUFNLGdHQUVSLENBQ0V2QixLQUFNLGlCQUNOdUIsS0FBTSw4RkFpRE5xQixTQUFVLFNBQUNJLEdBQ1QsSUFBTWlELEVBQU8sSUFBSTNFLEVBQUswQixFQUFRaEQsS0FBTWdELEVBQVF6QixLQUFNLFlBQWEsQ0FDN0RHLGdCQUFpQixXQUNmcUUsRUFBV0ksS0FBS25ELEVBQVFoRCxLQUFNZ0QsRUFBUXpCLEtBQ3hDLElBRUZxRixFQUFhQyxRQUFRWixFQUFLSSxlQUM1QixHQUVGLG1CQUVGTyxFQUFhaEUsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtQ29uZmlnLCBmb3JtU2VsZWN0b3IpIHtcbiAgICB0aGlzLmZvcm1TZWxlY3RvciA9IGZvcm1Db25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuaW5wdXRTZWxlY3RvciA9IGZvcm1Db25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yID0gZm9ybUNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLmluYWN0aXZlQnV0dG9uQ2xhc3MgPSBmb3JtQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5pbnB1dEVycm9yQ2xhc3MgPSBmb3JtQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLmVycm9yQ2xhc3MgPSBmb3JtQ29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGZvcm1Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmZvcm1fX2Vycm9yXyR7aW5wdXRFbGVtZW50Lm5hbWV9YFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmZvcm1fX2Vycm9yXyR7aW5wdXRFbGVtZW50Lm5hbWV9YFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBsaW5rLCB0ZW1wbGF0ZSwgeyBoYW5kbGVDYXJkQ2xpY2sgfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faXRlbVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlLXRleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRzX19pbWFnZVwiXG4gICAgKS5hbHQgPSBgaW1hZ2VuIGRlICR7dGhpcy5fbmFtZX0gYDtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG4gIF9oYW5kbGVyTGlrZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19faGVhcnRoLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19faGVhcnRoLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cbiAgX2hhbmRsZXJSZW1vdmUoKSB7XG4gICAgdGhpcy5fcmVtb3ZlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19oZWFydGgtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlckxpa2UoKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX3RyYXNoLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJSZW1vdmUoKTtcbiAgICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG4gIHJlbmRlcmVyKCkge1xuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl91c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlcm5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJuYW1lOiB0aGlzLl91c2VybmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cbiAgc2V0VXNlckluZm8oeyB1c2VybmFtZSwgam9iIH0pIHtcbiAgICB0aGlzLl91c2VybmFtZS50ZXh0Q29udGVudCA9IHVzZXJuYW1lO1xuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGpvYjtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2VBdXggPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2VBdXgpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQXV4KTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgcG9wdXBDbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX2J1dHRvbi1jcm9zc1wiXG4gICAgKTtcbiAgICBwb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgY2FsbEJhY2spIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcblxuICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrID0gY2FsbEJhY2s7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG5cbiAgICBjb25zdCBmb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgY29uc3QgZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcblxuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICBmb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIC8vIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtYmlnXCIpO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBgaW1hZ2VuIGRlICR7dGhpcy5fbmFtZX0gYDtcbiAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRQcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IG9wZW5FZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGNsb3NlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbi1jcm9zc1wiKTtcblxuZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50RWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dEFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhYm91dFwiKTtcblxuLyogU2VjY2nDs24gc2VndW5kbyBmb3JtdWxhcmlvIHBhcmEgbGFzIGltw6FnZW5lcyAqL1xuXG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvcHVwSW1hZ2VcIik7XG5leHBvcnQgY29uc3Qgb3BlbkFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGNsb3NlQWRkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGRDcm9zc1wiKTtcblxuLyogRnVuY2lvbmFsaWRhZCBwYXJhIGxhcyB0YXJnZXRhcyAqL1xuXG5jb25zdCB0ZW1wbGF0ZU5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRlbXBsYXRlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzWm9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2NvbnRlbnRcIik7XG5jb25zdCBpbnB1dFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKTtcbmNvbnN0IGlucHV0TGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlua1wiKTtcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudEFkZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VGb3JtXCIpO1xuXG4vKiBQb3B1cCBwYXJhIGxvIGRlIGxhcyBpbcOhZ2VuZXMgKi9cblxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9wdXBDYXJkXCIpO1xuY29uc3QgcG9wVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS10aXRsZVwiKTtcbmNvbnN0IHBvcHVwT3BlbkNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1iaWdcIik7XG5jb25zdCBwb3B1cENsb3NlQ2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VDcm9zc1wiKTtcbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRlLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IHtcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVKb2IsXG4gIHBvcHVwRWRpdCxcbiAgcG9wdXBBZGQsXG4gIG9wZW5FZGl0QnV0dG9uLFxuICBvcGVuQWRkQnV0dG9uLFxuICBpbnB1dE5hbWUsXG4gIGlucHV0QWJvdXQsXG4gIHBvcHVwQ2FyZCxcbiAgY2FyZHNab25lLFxufSBmcm9tIFwiLi91dGlscy91dGlscy5qc1wiO1xuXG5jb25zdCBmb3JtQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fZm9ybS1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWlucHV0X2ludmFsaWRcIixcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvci1hY3RpdmVcIixcbn07XG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuLyogSW5zcmFuY2lhciBwYXJhIGFncmVnYXIgaW1hZ2VuZXMgY29uIGVsIGhhbmRsZUNhcmRDbGljayAqL1xuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwicG9wdXBDYXJkXCIpO1xuXG5jb25zdCBwb3B1cEFkZEJ1dHRvbiA9IG5ldyBQb3B1cFdpdGhGb3JtKFwicG9wdXBJbWFnZVwiLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGlucHV0VmFsdWVzLnRpdGxlLCBpbnB1dFZhbHVlcy5saW5rLCBcIi50ZW1wbGF0ZVwiLCB7XG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICBwb3B1cEltYWdlLm9wZW4oaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLmxpbmspO1xuICAgIH0sXG4gIH0pO1xuICBjYXJkc1pvbmUucHJlcGVuZChjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbn0pO1xuXG4vKiBJbnN0YW5jaWFyIGluZm9ybWFjacOzbiBkZSB1c3VhcmlvICovXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlcm5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG59KTtcblxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCJlZGl0UHJvZmlsZVwiLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlcy5uYW1lO1xuICBwcm9maWxlSm9iLnRleHRDb250ZW50ID0gaW5wdXRWYWx1ZXMuYWJvdXQ7XG4gIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xufSk7XG5vcGVuRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFByb2ZpbGUub3BlbigpO1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IHVzZXJEYXRhLnVzZXJuYW1lO1xuICBpbnB1dEFib3V0LnZhbHVlID0gdXNlckRhdGEuam9iO1xufSk7XG5cbm9wZW5BZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBZGRCdXR0b24ub3BlbigpO1xufSk7XG5cbi8qIGluc3RhbmNpYXIgZm9ybXVsYXJpbyAqL1xuY29uc3QgZm9ybVZhbGlkYXRvclByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBcIi5wb3B1cF9fZm9ybVwiKTtcbmZvcm1WYWxpZGF0b3JQcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IGZvcm1WYWxpZGF0b3JDYXJkID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgXCIjaW1hZ2VGb3JtXCIpO1xuZm9ybVZhbGlkYXRvckNhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xuLyogSW5zdGFuY2lhciBsYXMgdGFyZ2V0YXMgICovXG5jb25zdCBzZWN0aW9uQ2FyZHMgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZWxlbWVudC5uYW1lLCBlbGVtZW50LmxpbmssIFwiLnRlbXBsYXRlXCIsIHtcbiAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgcG9wdXBJbWFnZS5vcGVuKGVsZW1lbnQubmFtZSwgZWxlbWVudC5saW5rKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgc2VjdGlvbkNhcmRzLmFkZEl0ZW0oY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2NvbnRlbnRcIlxuKTtcbnNlY3Rpb25DYXJkcy5yZW5kZXJlcigpO1xuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJmb3JtQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsImtleSIsInZhbHVlIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwibmFtZSIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfdGhpcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwibGluayIsInRlbXBsYXRlIiwiX3JlZiIsImhhbmRsZUNhcmRDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJfdGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwic3JjIiwiYWx0IiwidG9nZ2xlIiwiX3JlbW92ZUNhcmQiLCJfaGFuZGxlckxpa2UiLCJfaGFuZGxlclJlbW92ZSIsIlNlY3Rpb24iLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJjb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsIlVzZXJJbmZvIiwidXNlcm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX3VzZXJuYW1lIiwiX2pvYiIsInVzZXJuYW1lIiwiam9iIiwiX3JlZjIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJfaGFuZGxlRXNjQ2xvc2VBdXgiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJjbG9zZSIsImV2ZW50IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiY2FsbEJhY2siLCJfY2FsbFN1cGVyIiwiX3N1Ym1pdENhbGxiYWNrIiwiX2luaGVyaXRzIiwiaW5wdXRWYWx1ZXMiLCJmb3JtIiwiaW5wdXQiLCJfdGhpczIiLCJfc3VwZXJQcm9wR2V0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIm9wZW5FZGl0QnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwiaW5wdXROYW1lIiwiaW5wdXRBYm91dCIsIm9wZW5BZGRCdXR0b24iLCJjYXJkc1pvbmUiLCJwb3B1cEltYWdlIiwicG9wdXBBZGRCdXR0b24iLCJjYXJkIiwidGl0bGUiLCJvcGVuIiwicHJlcGVuZCIsImdlbmVyYXRlQ2FyZCIsInVzZXJJbmZvIiwicG9wdXBQcm9maWxlIiwiYWJvdXQiLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNlY3Rpb25DYXJkcyIsImFkZEl0ZW0iXSwic291cmNlUm9vdCI6IiJ9